<p>商品作成</p>
<div class="form-group">
  <form [formGroup]="myForm" (submit)="store()">
    <div>
      名前
      <input type="text" formControlName="name" placeholder="名前"/>
      @if (name.touched && name.errors?.['required']) {
      <div class="error">名前が必要です</div>
      }
    </div>
    <div>
      カテゴリー
      <select class="drop-down" formControlName="categoriesDropDown">
        @for (category of getCategories(); track $index) {
        <option>{{ category.name }}</option>
        }
      </select>
    </div>
    <div>
      価格（円）
      <input type="number" formControlName="price" placeholder="価格"/>
      @if (price.touched && price.errors?.['required']) {
      <div class="error">値段が必要です</div>
      }
    </div>
    <div>
      在庫数
      <input type="number" formControlName="stock" placeholder="在庫数"/>
      @if (stock.touched && stock.errors?.['required']) {
      <div class="error">在庫数が必要です</div>
      }
    </div>
    <div>
      説明
      <input type="text" formControlName="description" placeholder="説明"/>
    </div>
    <div>
      <label>画像</label>
      <div>
        @if (image_url) {
          <label for="upfile" style="cursor:pointer; display:inline-block">
            <img
              [src]="getImageUrl()"
              alt="アップロード画像"
              style="max-width:200px; max-height:200px; display:block"
            />
          </label>
          <input
            #fileInput
            id="upfile"
            name="upfile"
            type="file"
            accept="image/*"
            (change)="onchange(fileInput.files)"
            style="display:none"
          />
        } @else {
          <button type="button" (click)="fileInput.click()">画像をアップロード</button>
          <input
            #fileInput
            id="upfile"
            name="upfile"
            type="file"
            accept="image/*"
            (change)="onchange(fileInput.files)"
            style="display:none"
          />
        }
      </div>
    </div>
    <div><button type="submit" [disabled]="myForm.invalid">作成</button></div>
  </form>
  <button (click)="returnPage()">戻る</button>
</div>
